{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nconst initialState = {\n  products: {}\n};\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState: getInitialStateFromLocalStorage(),\n  reducers: {\n    addProductToCart: (state, action) => {\n      const product = action.payload;\n      state.products[product.id] = {\n        ...product,\n        quantity: 1\n      };\n      saveStateToLocalStorage(state);\n    },\n    updateProductQuantity: (state, action) => {\n      const {\n        productId,\n        quantity\n      } = action.payload;\n      const product = state.products[productId];\n      if (product) {\n        state.products[productId] = {\n          ...product,\n          quantity\n        };\n        saveStateToLocalStorage(state);\n      }\n    },\n    removeProduct: (state, action) => {\n      const productId = action.payload;\n      delete state.products[productId];\n      saveStateToLocalStorage(state);\n    }\n  }\n});\nfunction getInitialStateFromLocalStorage() {\n  const savedState = localStorage.getItem('cartState');\n  return savedState ? JSON.parse(savedState) : initialState;\n}\nfunction saveStateToLocalStorage(state) {\n  localStorage.setItem('cartState', JSON.stringify(state));\n}\nexport const {\n  addProductToCart,\n  removeProduct,\n  updateProductQuantity\n} = cartSlice.actions;\nexport default cartSlice.reducer;","map":{"version":3,"names":["createSlice","initialState","products","cartSlice","name","getInitialStateFromLocalStorage","reducers","addProductToCart","state","action","product","payload","id","quantity","saveStateToLocalStorage","updateProductQuantity","productId","removeProduct","savedState","localStorage","getItem","JSON","parse","setItem","stringify","actions","reducer"],"sources":["C:/Users/leoal/Front-Bookstore/src/components/Cart/cart.ts"],"sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\ninterface Product {\r\n  id: number;\r\n  name: string;\r\n  price: number;\r\n  description: string;\r\n  category: string;\r\n  quantity: number;\r\n}\r\n\r\ninterface CartState {\r\n  products: { [productId: number]: Product };\r\n}\r\n\r\nconst initialState: CartState = {\r\n  products: {},\r\n};\r\n\r\nconst cartSlice = createSlice({\r\n  name: 'cart',\r\n  initialState: getInitialStateFromLocalStorage(),\r\n  reducers: {\r\n    addProductToCart: (state, action: PayloadAction<Product>) => {\r\n      const product = action.payload;\r\n      state.products[product.id] = { ...product, quantity: 1 };\r\n      saveStateToLocalStorage(state);\r\n    },\r\n    updateProductQuantity: (\r\n      state,\r\n      action: PayloadAction<{ productId: number; quantity: number }>\r\n    ) => {\r\n      const { productId, quantity } = action.payload;\r\n      const product = state.products[productId];\r\n      if (product) {\r\n        state.products[productId] = { ...product, quantity };\r\n        saveStateToLocalStorage(state);\r\n      }\r\n    },\r\n    removeProduct: (state, action: PayloadAction<number>) => {\r\n      const productId = action.payload;\r\n      delete state.products[productId];\r\n      saveStateToLocalStorage(state);\r\n    },\r\n  },\r\n});\r\n\r\nfunction getInitialStateFromLocalStorage(): CartState {\r\n  const savedState = localStorage.getItem('cartState');\r\n  return savedState ? JSON.parse(savedState) : initialState;\r\n}\r\n\r\nfunction saveStateToLocalStorage(state: CartState) {\r\n  localStorage.setItem('cartState', JSON.stringify(state));\r\n}\r\n\r\nexport const {\r\n  addProductToCart,\r\n  removeProduct,\r\n  updateProductQuantity,\r\n} = cartSlice.actions;\r\n\r\nexport default cartSlice.reducer;\r\n"],"mappings":"AAAA,SAASA,WAAW,QAAuB,kBAAkB;AAe7D,MAAMC,YAAuB,GAAG;EAC9BC,QAAQ,EAAE,CAAC;AACb,CAAC;AAED,MAAMC,SAAS,GAAGH,WAAW,CAAC;EAC5BI,IAAI,EAAE,MAAM;EACZH,YAAY,EAAEI,+BAA+B,CAAC,CAAC;EAC/CC,QAAQ,EAAE;IACRC,gBAAgB,EAAEA,CAACC,KAAK,EAAEC,MAA8B,KAAK;MAC3D,MAAMC,OAAO,GAAGD,MAAM,CAACE,OAAO;MAC9BH,KAAK,CAACN,QAAQ,CAACQ,OAAO,CAACE,EAAE,CAAC,GAAG;QAAE,GAAGF,OAAO;QAAEG,QAAQ,EAAE;MAAE,CAAC;MACxDC,uBAAuB,CAACN,KAAK,CAAC;IAChC,CAAC;IACDO,qBAAqB,EAAEA,CACrBP,KAAK,EACLC,MAA8D,KAC3D;MACH,MAAM;QAAEO,SAAS;QAAEH;MAAS,CAAC,GAAGJ,MAAM,CAACE,OAAO;MAC9C,MAAMD,OAAO,GAAGF,KAAK,CAACN,QAAQ,CAACc,SAAS,CAAC;MACzC,IAAIN,OAAO,EAAE;QACXF,KAAK,CAACN,QAAQ,CAACc,SAAS,CAAC,GAAG;UAAE,GAAGN,OAAO;UAAEG;QAAS,CAAC;QACpDC,uBAAuB,CAACN,KAAK,CAAC;MAChC;IACF,CAAC;IACDS,aAAa,EAAEA,CAACT,KAAK,EAAEC,MAA6B,KAAK;MACvD,MAAMO,SAAS,GAAGP,MAAM,CAACE,OAAO;MAChC,OAAOH,KAAK,CAACN,QAAQ,CAACc,SAAS,CAAC;MAChCF,uBAAuB,CAACN,KAAK,CAAC;IAChC;EACF;AACF,CAAC,CAAC;AAEF,SAASH,+BAA+BA,CAAA,EAAc;EACpD,MAAMa,UAAU,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;EACpD,OAAOF,UAAU,GAAGG,IAAI,CAACC,KAAK,CAACJ,UAAU,CAAC,GAAGjB,YAAY;AAC3D;AAEA,SAASa,uBAAuBA,CAACN,KAAgB,EAAE;EACjDW,YAAY,CAACI,OAAO,CAAC,WAAW,EAAEF,IAAI,CAACG,SAAS,CAAChB,KAAK,CAAC,CAAC;AAC1D;AAEA,OAAO,MAAM;EACXD,gBAAgB;EAChBU,aAAa;EACbF;AACF,CAAC,GAAGZ,SAAS,CAACsB,OAAO;AAErB,eAAetB,SAAS,CAACuB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}